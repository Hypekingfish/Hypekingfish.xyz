<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8"/>
        <meta name="viewport" content="width=device-width, intial-scale=1.0" />
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400..800;1,400..800&family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet"/>
        <title>Hypekingfish</title>
        <link href="style.css" rel="stylesheet">
        <link rel="icon" type="image/x-icon" href="/img/FnBLogo_FINAL_800.png">
        <script src="https://kit.fontawesome.com/f78443c527.js" crossorigin="anonymous"></script>
    </head>
    <body class="container">
        <header>
            <h1>
                <a href="index.html" aria-label="Go Home"><span>Hypekingfish</span></a> 
            </h1>
            <button type="button" tabindex="-1" hidden></button>
            <nav>
                <ul>
                    <li><a href="about.html">About</a></li>
                    <li><a href="flying.html">Flying</a></li>
                    <li><a href="#">Placeholder</a></li>
                </ul>
            </nav>
        </header>
        <section class="Vatsim">
          <h2>My VATSIM Experience</h2>
          <div id="vatsim-stats" class="vatsim-text">
            <div class="controller-section">
              <img src="img/PDX_ASDEX.png" alt="VATSIM PDX ASDEX Controller Display"/>
              <h3>Controller Ratings</h3>
              <ul class="certifications">
                <li>S1 - Ground Controller <span class="hours" id="s1-hours">Loading...</span> hours</li>
                <!-- <li>S2 - Tower Controller <span class="hours" id="s2-hours">Loading...</span> hours</li> -->
                <!-- <li>S3 - Approach Controller <span class="hours" id="s3-hours">Loading...</span> hours</li> -->
              </ul>
              <p>Total Controller Hours: <span id="controller-hours">Loading...</span></p>
              <p>Total Pilot Hours: <span id="pilot-hours">Loading...</span></p>
            </div>
          </div>
          
          <script>
              fetch('/.netlify/functions/GetVatsimData')
                  .then(response => response.json())
                  .then(data => {
                      // Add error checking before setting values
                      const elements = {
                          'controller-hours': data.controllerHours,
                          'pilot-hours': data.pilotHours,
                          's1-hours': data.s1Hours,
                          // 's2-hours': data.s2Hours,
                          // 's3-hours': data.s3Hours
                      };

                      for (const [id, value] of Object.entries(elements)) {
                          const element = document.getElementById(id);
                          if (element) {
                              element.textContent = value;
                          }
                      }
                  })
                  .catch(error => {
                      console.error('Error:', error);
                      const statsElement = document.getElementById('vatsim-stats');
                      if (statsElement) {
                          statsElement.textContent = 'Failed to load VATSIM stats';
                      }
                  });
          </script>
        </section>
        <article>
        </article>
        <footer>
            <p><small><img src="img/Progress_Pride_Flag.png" alt="Progress Pride Flag"/> Created with passion by Hypekingfish <img src="img/Progress_Pride_Flag.png" alt="Progress Pride Flag"/></small></p>
            <p><small>All content &copy; of Hypekingfish, unless previous copyright exists.</small></p>
        </footer>
        <section class="social-links">
            <div class="social-links">
                <a href="https://github.com/yourusername" aria-label="GitHub" target="_blank" rel="noopener noreferrer">
                    <i class="fab fa-github"></i>
                </a>
                <a href="https://twitter.com/fishnbuckjr02" aria-label="Twitter" target="_blank" rel="noopener noreferrer">
                    <i class="fab fa-x-twitter"></i>
                </a>
                <a href="https://youtube.com/yourchannel" aria-label="YouTube" target="_blank" rel="noopener noreferrer">
                    <i class="fab fa-youtube"></i>
                </a>
                <a href="https://twitch.tv/hypekingfish" aria-label="Twitch" target="_blank" rel="noopener noreferrer">
                    <i class="fab fa-twitch"></i>
                </a>
                <a href="https://discord.gg/yourdiscord" aria-label="Discord" target="_blank" rel="noopener noreferrer">
                    <i class="fab fa-discord"></i>
                </a>
            </div>
        </section>
    </body>
</html>